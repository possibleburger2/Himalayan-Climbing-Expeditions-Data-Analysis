---
title: "Conquering the Heights: Key Predictors of Success in Himalayan Mountaineering Expeditions"
subtitle: "Age, Team Size, Oxygen Use, and Prior Attempts Shape the Odds, While Higher Altitudes Diminish Success Rates"
author: 
  - Daniel Xu
thanks: "Code and data are available at: [https://github.com/possibleburger2/](https://github.com/possibleburger2/Himalayan-Climbing-Expeditions-Data-Analysis)."
date: today
date-format: long
abstract: "This study examines the factors influencing the success of mountain climbing attempts by an expedition using a logistic regression model. More previous attempts, larger team size, and the use of supplemental oxygen were associated with higher success rates, while increased altitude and age reduced the likelihood of success. These findings improve our understanding of how personal, environmental, and logistical elements contribute to outcomes in high-altitude climbing. This knowledge can guide safer and more effective planning for future expeditions."
format: pdf
number-sections: true
bibliography: references.bib
editor: 
  markdown: 
    wrap: sentence
---

```{r}
#| include: false
#| warning: false
#| message: false
library(tidyverse)
library(knitr)
library(kableExtra)
library(readr)
library(dplyr)
library(arrow)
library(here)
library(ggplot2)
library(arkhe)
library(modelsummary)
library(kableExtra)
library(stringr)
library(brms)
library(rsample)
library(stats)
library(MASS)
library(pROC)
# Load data
peaks <- read_parquet(here("data/02-analysis_data/peaks_analysis_data.parquet"))
expeditions <- read_parquet(here("data/02-analysis_data/expeditions_analysis_data.parquet"))
members <- read_parquet(here("data/02-analysis_data/members_analysis_data.parquet"))
```

# Introduction

Mountaineering has been growing as an activity since the 90s, the views and sense of challenge have brought people around the globe to summit more and more mountains every year.
It is no surprise then, that when combined with a mountain range containing the highest above sea level peak in the world the Himalayas have had a rich documented history of mountaineering attempts.
Mountaineering is a dangerous hobby however, with unpredictable weather and temperatures so high up it is natural that not all attempts to summit mountain peaks succeed here.
This paper will find what factors have affected the climbers of the past to either conquer or be conquered.

This paper uses data sourced from @Cookson, based on The Himalayan Database [@Salisbury] about expeditions from 1905-2019 to analyze which factors help or deter climbers from succeeding.
We use a binomial logistic regression model to determine the probability of success based on a variety of demographic, enviromental, and organizational factors.

The estimand is the relationship between said factors and the success of a mountaineering expedition.
By analyzing the data set, we can identify which factors contribute to a success or failure and by how much.

My analysis shows that Mountaineering is positively impacted by oxygen used, younger age, going in the fall and spring, and being a man while is is negatively impacted by the height of the mountain and the amount of people not hired in the expedition.

These findings practically inform climbers about the impact of good preparation and timing over personal factors like age and sex, showing that regardless of who you are, what you do is the biggest factor in succeeding in high-altitude mountaineering.

The paper is further organized into four sections.
@sec-data discusses how the dataset used for the analysis was obtained and pre-processed.
I will explain the variables of interest in the dataset used for the analysis.
@sec-model describes the model being used for the analysis.
@sec-results then highlights and discusses the trends and associations found during the analysis.
Lastly, @sec-discussion talks about some interesting trends found in @sec-results in depth, linking it to the real world and also highlights the weaknesses and future of my analysis.

# Data {#sec-data}

The datasets were cleaned and analysed using the statistical programming software `R` [@citeR] along with the help of `tidyverse` [@citeTidyverse], `knitr` [@citeKnitr], `ggplot2` [@citeGgplot], `here` [@citeHere], `dplyr` [@citeDplyr], `rstanarm` [@citeRstanarm], `arrow` [@citeArrow] and `kableExtra` [@citeKableExtra].

## Overview

The raw datasets were obtained from @Cookson, who sourced them from The Himalayan Database [@Salisbury].

The Himalayan Database is a compilation of records for all expeditions that have climbed in the Nepal Himalaya.
The database is based on the expedition archives of Elizabeth Hawley, a long-time journalist based in Kathmandu, and it is supplemented by information gathered from books, alpine journals and correspondence with Himalayan climbers.

The original database currently covers all expeditions from 1905 through Spring-Summer 2023 to the most significant mountaineering peaks in Nepal.
Also included are expeditions to both sides of border peaks such as Everest, Cho Oyu, Makalu and Kangchenjunga as well as to some smaller border peaks.
Data on expeditions to trekking peaks are included for early attempts, first ascents and major accidents.
The updates to this database are published bi-annually.

My dataset, derived from @Cookson, contains the entries from 1905 through Spring 2019.
There was not any widely available data for similar climbing data as extensive and detailed.

An expedition becomes an entry in my analysis data-set if, between 1905 and Spring 2019, there was an attempt to climb any one of the many Himalayan peaks in Nepal.
This includes expeditions that were abandoned before the day of the climb due to poor planning or other issues.

The original data is split into 3 data sets: Peaks, Expeditions, and Members.
Peaks is linked to the other two data sets by `peak_id` which is a unique code for each mountain peak.
Peaks also contains more information about each specific mountain peak like `height_metres`, and first ascent year, country, and expedition id. `height_metres` is the height of the peak.

Members contains `member_id` which is a unique id for each individual in each expedition.
Importantly it doesn't capture the same individual in different expeditions instead assigning two `member_ids`.
It connects to Expeditions with `expeditions_id` and contains alot of information about the specific member during the expedition.
Most importantly for this data we use average sex and age of all the members in each expeditions for the model.

Expeditions contains most of the important data for our model since the model determines the success rate of an expedition as opposed to an individual.
The `year` column captures the numeric year of the expedition, and `season` indicates the season in which it occurred, such as "Autumn" or "Spring." The `termination_reason` column describes the outcome or reason for the expedition's conclusion, such as "Success (main peak)" or "Accident (death or serious injury)." Details about expedition composition are captured in `members`, which indicates the total number of members, and `hired_staff`, representing the count of additional staff hired.
The `oxygen_used` column is a logical variable indicating whether supplemental oxygen was used, while `sex_ratio` and `average_age` provide insights into the gender composition and average age of expedition members, respectively.
Additional success metrics include `success`, a logical column indicating whether the expedition achieved its goal, and `age_range`, a factor summarizing the age distribution of members.
Finally, the data set includes `height_attempted`, a numeric column for the altitude reached during the expedition, and `previous_attempts`, representing the number of prior attempts made to climb the same peak.

\newpage

## Success

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-Success
#| fig-width: 10
#| fig-height: 5
#| fig-cap: "A slight majority of Expeditions succeed, with the most common reasons expeditions fail being enviromental issues"

termination_counts <- expeditions |>
  dplyr::count(termination_reason, sort = TRUE)
ggplot(termination_counts, aes(x = "", y = n, fill = termination_reason)) +
  geom_bar(stat = "identity", width = 1) +  # Create the bar chart
  coord_polar(theta = "y") +               # Transform to a pie chart
  labs(
    title = "Distribution of Termination Reasons",
    fill = "Termination Reason"
  ) +
  theme_void() +                           # Clean up unnecessary gridlines
  theme(legend.position = "right",
        
        legend.text = element_text(size = 7),  # Adjust legend text size
    legend.title = element_text(size = 10), # Adjust legend title size
  
    plot.margin = margin(t = 10, r = 1, b = 10, l = 3) # Adjust margins (top, right, bottom, left)
  )         # Position the legend
```

@fig-Success shows the distribution of termination reasons, which is the reason given for why the expedition failed.

"Success (main peak)", "Success (subpeak)", and "Success (claimed)" all count as successes for our modelling purpose.
Sub peak successes are expeditions to a peak lower on the mountain but assuming the expedition planned to reach only the sub peak it should count as a success.
There is an issue of a sub peak success not properly representing the attempted height of the peak but the relative infrequency of sub peak successes make it not a large problem.

Did not attempt climbs could have been removed from the data, however this is a valid issue the model should help predict so it was left it.
The main issue is that there could have been many not attempted climbs left out of the data but we are not focusing on that outcome.

\newpage

## Expedition members

Members is the amount of non-paid people in the expedition.

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-members
#| fig-cap: "Most expeditions have less than 3 members showing an exponetial decrease with an increase in members. The red lines indicate member amounts that have only had one expedition"


expeditions |>
  ggplot(aes(members)) +
  geom_histogram(
    binwidth = 3,
    alpha = 0.8,
    boundary = 0,
    fill = "steelblue",
    color = "black"
  ) +
  geom_vline(
    data = expeditions |> filter(members > 36), 
    aes(xintercept = members),
    linetype = "dashed",
    color = "red"
  )+
  labs(
    title = "Distribution of Expedition size",
    caption = "Source: The Himalayan Database",
    x = "Members",
    y = "Expeditions"
  ) 
```

@fig-members shows most expeditions are parties of less than 3.
All expeditions with missing data or with zero members were left out so the less than 3 bucket is not over represented.
This distribution makes sense since larger parties require larger and larger amounts of effort and coordination.
\newpage

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-expedition-success
#| fig-cap: "Party size vs Ex"


ggplot(expeditions,aes(members,as.numeric(success))) +
 # Add jittered points with slight transparency 
  geom_jitter(height = 0.05, alpha = 0.3, color = "#2c3e50") +
  # Add logistic regression curve with confidence interval
  geom_smooth(method = "gam", 

             color = "#e74c3c") +
  # Add boxplot to show height distribution for success/failure
  geom_boxplot(aes(group = success), 
              alpha = 0.2, 
              color = "#3498db",
              width = 0.2) +
  # Customize scales
  scale_y_continuous(limits = c(0, 1), 
                    breaks = c(0, 1),
                    labels = c("Failure", "Success")) +
  # Customize theme and labels
  theme_minimal() +
  labs(
    title = "Expedition members vs Expedition Success",
    x = "Members",
    y = "Outcome"
  ) +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10)
  )

```

@fig-expedition-success shows a positive relationship between amount of members and expedition successes.
The trend line also shows the confidence interval given by the grey area.
As there are less data points with the increased members the less reliable the trend line is for this relationship.
While there could be a negative relationship past 25 members, for most expeditions it shows that the more members the greater the chances of successes.
\newpage

## Hired staff

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-hired
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

ggplot(expeditions, aes(hired_staff))+
  geom_histogram(
    binwidth = 1,
    fill = "steelblue",
    color = "black"
  ) +
  geom_vline(
    data = expeditions |> filter(hired_staff > 36), 
    aes(xintercept = hired_staff),
    linetype = "dashed",
    color = "red"
  )+
  labs(
    title = "Distribution of Hired Staff",
    caption = "Source: The Himalayan Database",
    x = "Staff",
    y = "Expeditions"
  ) 
```

\newpage

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-hired-success
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."
success_rate <- expeditions |>
  group_by(hired_staff)|>
  summarize(success_rate = mean(success))
ggplot(success_rate, aes(x = hired_staff, y = success_rate)) +
  geom_line(color = "blue") + # Line plot
  geom_point(color = "red") + # Points to emphasize values
  labs(
    title = "Success Rate by Members",
    x = "Number of Members",
    y = "Success Rate"
  ) +
  theme_minimal()
```

\newpage

## Season

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-season
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

ggplot(expeditions,aes(season)) +
  geom_bar()
```

\newpage

## Year

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-year
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

ggplot(expeditions,aes(year)) +
  geom_histogram()
```

\newpage

## Average age of expedition

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-ssdistribution
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

ggplot(expeditions, aes(average_age)) +
  geom_histogram()
```

\newpage

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-age
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."
success_by_age <- expeditions |>
  group_by(age_range) |>
  summarize(success_rate = mean(success, na.rm = TRUE))
ggplot(success_by_age,aes( x = age_range, y = success_rate))+
  geom_bar(stat = 'identity')

ggplot(expeditions,aes(average_age,as.numeric(success))) +
 # Add jittered points with slight transparency 
  geom_jitter(height = 0.05, alpha = 0.3, color = "#2c3e50") +
  # Add logistic regression curve with confidence interval
  geom_smooth(method = "gam", 

             color = "#e74c3c") +
  # Add boxplot to show height distribution for success/failure
  geom_boxplot(aes(group = success), 
              alpha = 0.2, 
              color = "#3498db",
              width = 0.2) +
  # Customize scales
  scale_y_continuous(limits = c(0, 1), 
                    breaks = c(0, 1),
                    labels = c("Failure", "Success")) +
  # Customize theme and labels
  theme_minimal() +
  labs(
    title = "Relationship between Height and Success",
    x = "Height",
    y = "Outcome"
  ) +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10)
  )
```

\newpage

## Proportion of women to men

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-sex
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

success_rate <- expeditions |>
  group_by(sex_ratio)|>
  summarize(success_rate = mean(success))

ggplot(success_rate, aes(x = sex_ratio, y = success_rate)) +
  geom_point(alpha = 0.3) +
  geom_smooth(method = "loess", se = TRUE) +
  labs(title = "Success Rate vs Team Gender Composition",
       x = "Proportion of Men in Team",
       y = "Success Rate") +
  theme_minimal()

ggplot(expeditions, aes(x = sex_ratio, y = as.numeric(success))) +
  # Add jittered points with slight transparency
  geom_jitter(height = 0.05, alpha = 0.3, color = "#2c3e50") +
  # Add logistic regression curve with confidence interval
  geom_smooth(method = "glm", 
             method.args = list(family = "binomial"),
             color = "#e74c3c") +
  # Add boxplot to show height distribution for success/failure
  geom_boxplot(aes(group = success), 
              alpha = 0.2, 
              color = "#3498db",
              width = 0.2) +
  # Customize scales
  scale_y_continuous(limits = c(0, 1), 
                    breaks = c(0, 1),
                    labels = c("Failure", "Success")) +
  # Customize theme and labels
  theme_minimal() +
  labs(
    title = "Relationship between Height and Success",
    x = "Height",
    y = "Outcome"
  ) +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10)
  )
```

can be because many of the data points are the same people, data could represent experience on success rather than gender composition

## Height of mountain attempted

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-height
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

ggplot(expeditions,aes(height_attempted)) +
  geom_histogram()
```

```{r}
#| warning: false
#| message: false
#| echo: false
#| label: fig-height-success
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."

success_rate <- expeditions |>
  group_by(height_attempted)|>
  summarize(success_rate = mean(success))
ggplot(success_rate, aes(height_attempted,success_rate)) +
  geom_point(alpha = 0.6, color = "#2c3e50") +
  # Add trend line with confidence interval
  geom_smooth(method = "loess", color = "#e74c3c") +
  scale_y_continuous(limits = c(0, 1)) +
  scale_x_continuous(limits = c(5500, 9000)) +
  # Customize theme and labels
  theme_minimal() +
  labs(
    title = "Relationship between Height of mountain and Success Rate",
    x = "Sex Ratio",
    y = "Success Rate",
    caption = "Data source: Your dataset"
  ) +
  # Enhance readability
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10)
  )
####

ggplot(expeditions, aes(x = height_attempted, y = as.numeric(success))) +
  # Add jittered points with slight transparency
  geom_jitter(height = 0.05, alpha = 0.3, color = "#2c3e50") +
  # Add logistic regression curve with confidence interval
  geom_smooth(method = "gam", 
             method.args = list(family = "binomial"),
             color = "#e74c3c") +
  # Add boxplot to show height distribution for success/failure
  geom_boxplot(aes(group = success), 
              alpha = 0.2, 
              color = "#3498db",
              width = 0.2) +
  # Customize scales
  scale_y_continuous(limits = c(0, 1), 
                    breaks = c(0, 1),
                    labels = c("Failure", "Success")) +
  # Customize theme and labels
  theme_minimal() +
  labs(
    title = "Relationship between Height and Success",
    x = "Height",
    y = "Outcome"
  ) +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10)
  )
```

```{r, fig.width = 12, fig.height = 6}
#| warning: false
#| message: false
#| echo: false
#| label: fig-height-distribution
#| fig-cap: "Distribution of Himialayan peaks, mountains recorded are centered around 6200 M above sea level.."


peaks |>
  ggplot(aes(height_metres)) +
  geom_histogram(
    binwidth = 200,
    alpha = 0.8
  ) +
  annotate("text", 8450, 17, label = "Mount Everest") +
  annotate(
    "curve",
    x = 8500,
    y = 15,
    xend = 8775,
    yend = 2,
    curvature = -0.25,
    arrow = arrow(length = unit(2, "mm"))
  ) +
  labs(
    title = "Distribution of Himalayan Peak Heights",
    caption = "Source: The Himalayan Database",
    x = "Height (m) above sea level",
    y = "Number of peaks"
  )
```

@fig-ssdistribution shows most peaks sit around 6000 meters above sea level, with a right skewed distribution and a maximum of almost 9000 meters and a minimum of 5250 meters.

The Himalayan mountain range spans a large amount of distance, which means that the graphed distribution does not represent the distribution of ALL peaks in the Himalayas.
Instead this distribution represents the distribution of peaks commonly attempted/climbed.The Himalayas starting at X M starting above 2000m sea level combined with the lowest height required to be considered a peak, the distribution starts at 5000m above sea level.

\newpage

## Climbing attempts

```{r}
#| warning: false
#| message: false
#| echo: false
#| fig-cap: "Amount of unclimbed Himalayan peaks"

peaks |>
  ggplot(aes(climbing_status, fill = climbing_status)) +
  geom_bar() +
  labs(
    title = "More than a quarter of Himalayan peaks remain unclimbed",
    x = "",
    y = "Number of peaks"
  ) +
  theme(legend.position = "none")
```

```{r}
#| warning: false
#| message: false
#| echo: false
#| fig-cap: "Amount of unclimbed Himalayan peaks"

ggplot(expeditions, aes(previous_attempts)) +
  geom_histogram(
  )
ggplot(expeditions, aes(previous_attempts, as.numeric(success))) +
           # Add jittered points with slight transparency
  geom_jitter(height = 0.05, alpha = 0.3, color = "#2c3e50") +
  # Add logistic regression curve with confidence interval
  geom_smooth(method = "loess", 

             color = "#e74c3c") +
  # Add boxplot to show height distribution for success/failure
  geom_boxplot(aes(group = success), 
              alpha = 0.2, 
              color = "#3498db",
              width = 0.2) +
  # Customize scales
  scale_y_continuous(limits = c(0, 1), 
                    breaks = c(0, 1),
                    labels = c("Failure", "Success")) +
  # Customize theme and labels
  theme_minimal() +
  labs(
    title = "Relationship between Height and Success",
    x = "Height",
    y = "Outcome"
  ) +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10)
  )
```

This graph shows that despite over 100 years of climbing history, not all attempted peaks have been conquered.
Why do so many climbs fail however?
The following graph shows the most common reasons.

## Measurement

The measurement of Himalayan climbing data in the referenced dataset involves converting real-world phenomena—such as expeditions, summits, and fatalities—into structured entries.
This process begins with records collected from expedition reports, which are typically submitted by climbers or organizations.
These reports include details about expedition dates, routes, climbers' nationalities, success in reaching the summit, and any fatalities or injuries that occurred.

The dataset relies heavily on sources like The Himalayan Database, a comprehensive archive maintained by Elizabeth Hawley and her successors.
This database aggregates information from direct interviews with climbers, expedition documentation, and third-party reports.
However, the translation of these real-world events into dataset entries introduces several challenges.
Discrepancies may arise due to incomplete or inconsistent reporting, varying definitions of a “summit,” and the underrepresentation of smaller, independent expeditions.

For example, an expedition is recorded in the dataset only if sufficient documentation is available to verify its occurrence and outcomes.
Factors such as weather conditions, local incidents, or logistical difficulties that don't result in a summit or a fatality may not be consistently recorded.
Additionally, subjective elements, like the climbers’ or organizers' interpretation of success, influence the data's structure.
These steps, while thorough, highlight potential biases in how phenomena are represented as measurable data.

# Model {#sec-model}

I used a Binary Logistic Regression uses the age of an individual,the amount of members in their expedition, the amount of oxygen they used, the season of their climb, their sex and the height of mountain to determine the likelihood of an individual of summit-ting the peak or "succeeding".
A Binary Logistic Regression is a statistical method to predict binary outcomes like the success or failure of a climb based on both categorical and continuous variables.
The Model uses six independent demographic variables: "age","members","oxygen_used","season","sex", and "height_metres" and the dependent variable is "success" The logistic regression model I will be using is: $$\log\left(\frac{\hat{p}}{1 - \hat{p}}\right) = \beta_0 + \beta_1 \times \text{averageage} + \beta_2 \times \text{members} + \beta_3 \times \text{oxygenused} + \beta_4 \times \text{season} +  \beta_5 \times \text{heightattempted} + \beta_6 \times \text{year} + \beta_7 \times \text{previousattempts}  + \beta_8 \times \text{sexratio} + \beta_9 \times \text{hiredstaff}$$

$$\log\left(\frac{\hat{p}}{1 - \hat{p}}\right) = \beta_0 + \beta_1 \times \text{averageage} + \beta_2 \times \text{members} + \beta_3 \times \text{oxygenused} +  \beta_4 \times \text{heightattempted}  + \beta_5 \times \text{previousattempts}$$

## Model Justification

```{r}
#| echo: false
#| warning: false
#| message: false
#| label: tbl-summary1


# Load your models
model1 <- readRDS(here("models/model1.rds"))
model2 <- readRDS(here("models/model2.rds"))

modelsummary(model1,statistic = c("p.value")) 
```

\newpage

This table shows the influence (top number) and P-Value (bottom number in brackets) of each variable.
For example each year increase in age reduces the probability they will succeed by around two percent with a P-value of 0.001 which means we are very sure of this relationship.
A P-value of 0.001 means only 0.1% of the time this relationship can be explained by random chance.
Because the standard level of uncertainty is less than 5% we should try to remove variables over a 0.05 P-value.
There are also several figures relating to model accurary at the bottom of the figure;the main one to focus on is RMSE.
An RMSE of 0.41 means the model predicts results within 41% of the actual results.
For a model with a binary outcome it means our model predicts successes 59% of the time.(removed entries for each country due to formatting issues)

Because we have so many statistically insignificant variables at a 5% uncertainty we should try to remove them to see the impact it has on the model

```{r}
#| echo: false
#| warning: false
#| message: false
#| label: tbl-summary2

modelsummary(model2, statistic = c("p.value"))
```

\newpage

The second table shows the results when citizenship and hired_staff are removed.
We see the RMSE only grains 0.01, meaning it loses 1% accuracy.
This means the citizenship of climber nor the amount of hired staff did not contribute to the model's accuracy and were good to remove.

```{r, fig.width = 2, fig.height = 1}
#| echo: false
#| warning: false
#| message: false
#| label: tbl-summary


results <- anova(model1,model2,
      test = "LRT")
kable(results, caption = "ANOVA Model Comparison") |>
  kable_styling(full_width = FALSE, position = "center")
```

This anova table just confirms that there is no difference in the modelling ability after removing the two predictor variables.

## Results {#sec-results}

```{r}
#| echo: false
#| warning: false
#| message: false
#| label: fig-model-coefficients1
#| fig-cap: Coefficients of the model

# Coefficients for the model
coefficients <- broom::tidy(model2, conf.int = TRUE)

# Plot for the coefficients of the model
ggplot(coefficients, aes(x = estimate, y = term)) +
  geom_point() + # Coefficient points
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high)) + # Confidence/Credible interval bars
  geom_vline(xintercept = 0, linetype = "dashed", color = "red") + # Add zero line
  labs(x = "Coefficient Estimate", y = "Predictor Variable") + # Axis labels
  theme_minimal() # Minimal theme for better readability
```

```{r}
#| echo: false
#| warning: false
#| message: false
#| label: fig-model-coefficients
#| fig-cap: Coefficients of the model


  
  data_split <- initial_split(expeditions, prop = 0.8)
  
  # Extract the training and testing data
  train_data <- training(data_split)
  test_data <- testing(data_split)

 test_data$predicted_prob <- predict(model2,newdata = test_data, type = "response")
  test_data$predicted_class <- ifelse(test_data$predicted_prob >= 0.5, 1, 0)
  
  # Evaluate model performance
  # Confusion matrix
  confusion_matrix <- table(Predicted = test_data$predicted_class, Actual = test_data$success)
  print(confusion_matrix)
  
  # Calculate accuracy
  accuracy <- sum(diag(confusion_matrix)) / sum(confusion_matrix)
  print(paste("Accuracy:", accuracy))
  
  roc_curve <- roc(test_data$success, test_data$predicted_prob)
  
  # Plot the ROC curve
  plot(roc_curve, col = "blue", main = "ROC Curve", print.auc = TRUE)
  
  # Optionally, get the AUC value
  auc_value <- auc(roc_curve)
  print(paste("AUC:", auc_value))
```

@fig-model-coefficients shows most of the coefficients do not have a large affect on success however have a very certain affect on success.
The season you go are all relative to fall, so going during the fall has a large measured impact on success as well as oxygen used and sex.

# Discussion {#sec-discussion}

Age is representative of both physical health/training and experience, so it is somewhat inaccurate to assume it would have a linear affect on success.
It would be better to have specific data on experience and health.

Expedition member numbers can reflect prepardness, benefit of teamwork and coordination.
It also reflects the inherent increased level of organization of a larger group existing.
It also can reflect underlying skill of members involved though this could swing either way.

Oxygen usage reflects prepardness, technological advancement, climbing community collective experience/coordination

While season data was deemed unimportant for the model, if you look at the season distribution of climbing it is obvious that climbers prefer spring and fall.
This is due to the more predictable calmer weather.

Sex ratio

Previous attempt data

This data and the following data analysis mostly covers the human part of the risk in mountaineering.
That is to say it does not take into account the many environmental factors that exist that cause expeditions to fail.

What can be done about this: Firstly weather forecasting data should be considered for success rate since it constitutes a quarter of all expedition failures.

Other factors like avalanche risk can be measured by snow depth, recent weather patterns, combined with weather forcast data.
This should prove to be more difficult to predict than overall weather affects since it is very dependent on the specific geography of the peak.

This is similarly rock and ice risk can be measured by weather/erosion patterns, analysis of geography.
This would be very difficult to realistically observe.

We should also look to observe individual health issues/risks as well as individual skill/ climbing history to more accurately predict success.

While peak height is a valuable way to determine peak difficulty there are a variety of other factors about the geography of a climb that can make it easier or more diffucult.

In general mountaineering carries some sort of risk and that is part of the appeal.
As technology and experience decreases risk people will attempt riskier routes and peaks.

## What was done

## What was learned

## Missing data

## Going forward

## Chances of success decline with increase in age

Age is a significant factor in mountaineering success, with success rates generally decreasing as climbers get older.
This decline can be attributed to various age-related factors, such as the natural loss of muscle mass, strength, and aerobic capacity.
As climbers age, they may also experience reduced agility, flexibility, and slower recovery, which can hinder their performance on difficult terrain and in recovering from intense physical exertion.

In addition to these physical challenges, older climbers may face health issues like cardiovascular problems, joint stiffness, and decreased bone density, all of which can further limit their ability to meet the physical demands of mountaineering.
These factors contribute to a reduced ability to handle the stresses of expeditions and increase the likelihood of difficulties along the way.

However, it is important to recognize that success in mountaineering is not solely determined by physical ability.
Experience, skill, preparation, and mental strength play crucial roles in overcoming the challenges of the climb.
Older climbers, despite the physiological decline that comes with age, can still achieve success by leveraging their experience, using strategic planning, and maintaining a strong mindset.
These factors enable them to adapt to the challenges they face, showing that age does not necessarily preclude achieving mountaineering goals.

In summary, age-related impacts on mountaineering success are significant, with success rates generally decreasing as climbers age.
However, older climbers can overcome some of these challenges through experience, skill, strength training, and a strong mindset, allowing them to continue enjoying mountaineering well into their later years.

\newpage

\appendix

# Appendix {#sec-appendix}

## Cleaning

For the analysis data, the cleaning steps were from @Cookson

The data cleaning process described in the provided script involves transforming raw data into a more consistent, accurate, and analysis-ready format.
The first step in the cleaning process is applied to the peaks dataset, which contains information about various mountain peaks.
In this step, columns are renamed for clarity, such as changing PEAKID to peakid and PKNAME to peakname.
Only the necessary columns are retained, while others are discarded to simplify the dataset.
A key aspect of this cleaning is handling the climbingstatus column.
The raw data uses numerical values (0, 1, 2) to represent the climbing status, so these numbers are recoded into meaningful labels like "Unknown," "Unclimbed," and "Climbed." Additionally, a data entry error is corrected for Sharpu II (identified by peakid == "SPH2"), where the year of the first ascent is changed to 2018 to fix an obvious mistake.

The second dataset cleaned is the expeditions dataset, which tracks various climbing expeditions.
Here, the dataset is joined with the peaks dataset to bring in the peakname for each expedition using the peakid.
Only the relevant columns are selected and renamed for clarity.
The highpointmetres column is adjusted by setting any value of 0 to NA, as it likely indicates missing data.
Categorical variables like terminationreason and season are recoded to make them more readable.
The terminationreason column is recoded from numeric values (such as 0, 1, and 2) into descriptive labels like "Success (main peak)," "Bad weather," and "Accident." Similarly, the season column is recoded from numbers (0-4) into readable season names like "Spring," "Summer," "Autumn," and "Winter."

The third dataset, members, contains information about individual climbers.
This dataset is also joined with the peaks dataset to associate each climber's expedition with the corresponding peak name.
As with the other datasets, only the relevant columns are retained and renamed.
Any value of 0 in the age column is treated as missing data and changed to NA.
The deathcause and injurytype columns, which are initially represented by numeric values (0-12), are recoded into readable categories like "AMS" (Acute Mountain Sickness) and "Exhaustion." The cleaning also involves handling information related to deaths and injuries.
For climbers who have died, the deathcause and deathheightmetres are updated, and similarly, the injurytype and injuryheightmetres are updated for injured climbers.

## Observational data

Himalayan climbing data, particularly concerning summits and fatalities on peaks like Mount Everest, may misrepresent actual outcomes due to several factors, including incomplete reporting, commercial biases, and evolving definitions of success.
These discrepancies can create a skewed understanding of the risks and achievements in high-altitude mountaineering.
Incomplete Reporting

Many summits, fatalities, and near-misses in the Himalayas go unreported or inaccurately documented due to the remote and challenging environments of the region.
Smaller expeditions, particularly those from less prominent countries or by independent climbers, may not submit detailed records.
Additionally, incidents on less-frequented peaks are less likely to be covered in international or even regional climbing databases, leading to underrepresentation in global statistics.
For example, organizations like the Himalayan Database, while comprehensive, rely heavily on self-reported data, which can vary in reliability depending on the source.
Commercial Influences

The rise of commercial expedition companies has significantly influenced how climbing data is presented.
For marketing purposes, these companies may highlight success rates while downplaying or omitting fatalities or unsuccessful attempts.
Moreover, certain deaths that occur before or after the official climbing season might not be included in annual tallies, further skewing statistics.
High-profile peaks like Everest often see overrepresentation in the data, as their fame and accessibility make them more frequently reported than other Himalayan mountains.

The definition of a “summit” itself can vary, adding further complications.
On Everest, for example, some climbers might claim summits upon reaching the South Summit or other points close to the highest peak, particularly in cases of bad weather or emergencies.
Such claims are sometimes accepted without verification, leading to inflated success statistics.
Disputes over what constitutes a legitimate ascent, particularly as aided by modern technology like oxygen tanks and fixed ropes, also muddy the waters of accurate representation.
Bias in Reporting Fatalities

Fatality rates may also be misrepresented due to a focus on high-profile accidents involving Western climbers or commercial expeditions, while incidents involving Sherpas and local climbers are often underreported.
Sherpas, who take on the riskiest roles during climbs, such as route preparation and heavy load carrying, face disproportionate risks that may not be fully reflected in the data.
Conclusion

The misrepresentation of Himalayan climbing data has implications for understanding the true risks and challenges of high-altitude mountaineering.
Efforts to improve the accuracy of this data, such as independent verification and more comprehensive reporting systems, are essential for providing climbers, researchers, and policymakers with reliable information.
Sources like The Himalayan Database [@Salisbury], the American Alpine Journal, and recent academic studies on mountaineering ethics and statistics provide valuable insights but also highlight the need for more transparent and standardized data collection practices.

# References
